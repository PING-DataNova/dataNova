version: '3.8'

services:
  # PostgreSQL (optionnel - si vous choisissez PostgreSQL au lieu de SQLite)
  postgres:
    image: postgres:16-alpine
    container_name: datanova_postgres
    environment:
      POSTGRES_USER: datanova
      POSTGRES_PASSWORD: datanova_password
      POSTGRES_DB: datanova
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - datanova_network

  # Application Agent 1
  agent:
    build: .
    container_name: datanova_agent1
    env_file:
      - .env
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      - postgres
    networks:
      - datanova_network
    # Uncomment pour lancer en mode daemon
    # command: python -m src.main

volumes:
  postgres_data:

networks:
  datanova_network:
    driver: bridge
